```{r}
library(readr)
library(ggplot2)
library(dplyr)
library(tidymodels)
library(rjson)
tidymodels_prefer()
```

```{r}
stringency_data <- read.csv('covid-stringency-index.csv')
all_data <- read.csv('owid-covid-data.csv')
```

```{r}
isl_swe_data <- all_data %>%
  filter(iso_code=="SWE"|iso_code=='ISL')
```

```{r}
all_data %>%
  ggplot(aes(x=date,y=new_cases_smoothed_per_million, color=continent)) +
  geom_point()
```

```{r}
lm_spec <-
    linear_reg() %>% 
    set_engine(engine = 'lm') %>% 
    set_mode('regression')
```

```{r}
mod1 <- fit(lm_spec,
            total_deaths ~ stringency_index + population, 
            data = all_data)

mod1 %>%
  pluck()
```

```{r}
what_questions_are = read.csv(file = 'what_questsions_are.csv')
what_answer_codes_mean = read.csv(file = 'what_answer_codes_mean.csv')
```

```{r}
data_index = fromJSON(file='data_index_orient.json')
data_column = fromJSON(file='data_column_orient.json')
```

```{r}
country = 'IT'
quest = 'Govresponse_6'


data_index[[quest]][[country]] %>%
  as.numeric() %>%
  mean()

what_questions_are %>%
  filter(var==quest) %>%
  select('question')

what_answer_codes_mean %>%
  filter(var == quest) %>%
  select('code', 'label')

```

